# 📖 使用指南

Voting-Fun 保密投票系统完整使用说明

---

## 🚀 快速开始

### 前置要求

1. **安装 MetaMask**
   - Chrome/Firefox: https://metamask.io/download/
   - 创建钱包并备份助记词

2. **获取 Sepolia 测试币**
   - 访问: https://sepoliafaucet.com/
   - 或: https://faucet.quicknode.com/ethereum/sepolia
   - 输入你的钱包地址获取免费 ETH

3. **添加 Sepolia 网络到 MetaMask**
   - 网络名称: Sepolia
   - RPC URL: https://sepolia.infura.io/v3/
   - Chain ID: 11155111
   - 货币符号: SepoliaETH
   - 区块浏览器: https://sepolia.etherscan.io

---

## 📱 访问应用

1. **打开网站**
   - 在线版本: https://你的应用.netlify.app
   - 或本地运行: http://localhost:3000

2. **连接钱包**
   - 点击 "连接 MetaMask 钱包"
   - MetaMask 会弹出连接请求
   - 点击 "连接" 授权

3. **切换网络**
   - 如果不是 Sepolia 网络，会提示切换
   - 点击 "切换网络" 按钮
   - 在 MetaMask 中确认

---

## 🗳️ 创建投票

### 步骤

1. **点击 "创建投票" 标签**

2. **填写投票信息**
   - **投票标题**: 例如 "你最喜欢的编程语言？"
   - **投票选项**: 至少 2 个，最多 10 个
     - 选项 1: JavaScript
     - 选项 2: Python
     - 选项 3: Rust
   - **投票时长**: 1-168 小时（默认 24 小时）

3. **点击 "创建投票"**
   - MetaMask 会弹出交易确认
   - 查看 Gas 费用
   - 点击 "确认"

4. **等待确认**
   - 显示 "创建中..." 加载状态
   - 交易确认后显示成功提示
   - 自动跳转到投票列表

### 💰 费用

- **创建投票**: ~0.001-0.005 SepoliaETH（Gas费）
- **免费测试**: 使用 Faucet 获取测试币

### 📝 注意事项

- 投票创建后**无法修改**
- 选项数量：2-10 个
- 时长范围：1-168 小时
- 标题长度：最多 200 字符
- 选项长度：最多 100 字符

---

## 🎯 参与投票

### 步骤

1. **浏览投票列表**
   - 查看所有进行中的投票
   - 显示投票标题、选项数量、剩余时间
   - 绿色标签 = 进行中，灰色标签 = 已结束

2. **点击投票卡片**
   - 进入投票详情页

3. **查看投票信息**
   - 投票标题
   - 创建者地址
   - 剩余时间
   - 投票状态

4. **选择投票选项**
   - 单选按钮选择一个选项
   - 被选中的选项会高亮显示

5. **提交投票**
   - 点击 "提交投票 (加密)" 按钮
   - 显示 "初始化加密..." - 正在准备加密数据
   - 显示 "提交投票中..." - 正在发送交易
   - MetaMask 弹出确认，点击 "确认"
   - 显示成功提示

6. **投票完成**
   - 页面显示 "您已投票" 
   - 显示 "您的投票是完全保密的" 提示
   - 等待投票结束查看结果

### 🔐 隐私保护

- ✅ **投票内容完全加密** - 使用 FHEVM 技术
- ✅ **无人知道你的选择** - 包括合约创建者
- ✅ **链上加密存储** - 数据安全可验证
- ✅ **只有结果可见** - 投票结束后解密总计数

### 💰 费用

- **投票**: ~0.002-0.01 SepoliaETH（Gas费较高，因为涉及加密计算）

### ⚠️ 重要提示

- 每个地址只能投一次
- 投票后无法修改
- 投票是永久记录在链上的
- 加密过程需要一些时间，请耐心等待

---

## 📊 查看结果

### 进行中的投票

**你能看到**:
- ✅ 投票标题和选项
- ✅ 剩余时间
- ✅ 是否已投票

**你看不到**:
- ❌ 当前票数（加密状态）
- ❌ 其他人的投票选择
- ❌ 自己的投票选择（加密后无法读取）

### 已结束的投票

**自动触发**:
- 到达结束时间后，投票自动结束
- 或创建者手动结束投票

**查看结果**:
1. 等待创建者请求解密
2. 解密完成后显示结果：
   - 每个选项的票数
   - 得票百分比
   - 进度条显示
   - 获胜选项标记 🏆

**结果示例**:
```
JavaScript: 45 票 (45%)  ████████████ 🏆
Python:     30 票 (30%)  ████████
Rust:       25 票 (25%)  ██████

总投票数: 100
```

---

## 👨‍💼 创建者功能

如果你是投票的创建者，你有额外的权限：

### 提前结束投票

1. 进入投票详情页
2. 向下滚动到底部
3. 点击 "立即结束投票" 按钮
4. 确认交易

### 请求解密结果

1. 投票结束后
2. 点击 "请求解密结果" 按钮
3. 确认交易
4. 等待 Gateway 处理（通常几分钟）
5. 刷新页面查看解密结果

---

## 🎨 界面功能

### 头部导航

- **项目Logo**: 点击返回首页
- **网络显示**: 当前连接的网络（应为 Sepolia）
- **账户地址**: 显示已连接的钱包地址
- **断开按钮**: 断开钱包连接

### 标签导航

- **投票列表**: 查看所有投票
- **创建投票**: 创建新投票

### 投票卡片

- **标题**: 投票主题
- **状态标签**: 进行中/已结束
- **创建者**: 发起人地址
- **选项数量**: 投票选项数
- **剩余时间**: 倒计时
- **解密状态**: 是否已公开结果

---

## 🐛 常见问题

### Q1: 为什么连接钱包失败？

**A**: 检查：
- MetaMask 是否已安装
- 浏览器是否支持
- 尝试刷新页面

### Q2: 为什么显示网络错误？

**A**: 
- 确保连接到 Sepolia 测试网
- 点击 "切换网络" 按钮
- 或在 MetaMask 中手动切换

### Q3: 为什么创建投票失败？

**A**: 检查：
- 钱包是否有足够的 SepoliaETH
- 标题和选项是否填写完整
- 选项数量是否在 2-10 之间

### Q4: 为什么投票交易很慢？

**A**: 
- FHE 加密计算比普通交易慢
- Gas 费用也较高
- 这是隐私保护的代价
- 耐心等待，不要重复提交

### Q5: 投票后能看到自己的选择吗？

**A**: 
- 不能！这是 FHE 的特性
- 投票被加密后，连你自己都无法读取
- 只有最终统计结果会被解密
- 这确保了完全的隐私保护

### Q6: 为什么看不到结果？

**A**: 
- 投票必须先结束
- 创建者需要请求解密
- 解密需要时间（Gateway 处理）
- 刷新页面查看最新状态

### Q7: Gas 费用怎么这么贵？

**A**: 
- 这是测试网，不是真钱
- FHE 计算确实比普通交易贵
- 未来会有优化
- 使用 Faucet 获取免费测试币

### Q8: 可以投多次吗？

**A**: 
- 不可以，每个地址只能投一次
- 这是合约层面的限制
- 确保投票公平性

### Q9: 如何获得更多测试币？

**A**: 
- 使用多个 Faucet 网站
- 每24小时可以领取一次
- 加入 Sepolia Discord 社区
- 礼貌地询问其他开发者

### Q10: 投票数据保存在哪里？

**A**: 
- 所有数据保存在 Sepolia 区块链上
- 完全去中心化
- 永久存储
- 可在 Etherscan 上验证

---

## 🔍 高级功能

### 查看链上数据

1. 访问 Etherscan: https://sepolia.etherscan.io/
2. 输入合约地址
3. 查看 "Read Contract" 读取数据
4. 查看 "Write Contract" 执行操作
5. 查看 "Events" 事件日志

### 直接调用合约

如果你熟悉 Web3，可以直接调用：

```javascript
// 使用 ethers.js
const contract = new ethers.Contract(address, abi, signer)

// 获取投票信息
const info = await contract.getPollInfo(1)

// 获取投票总数
const count = await contract.pollCount()
```

---

## 📱 移动端使用

### 在手机上使用

1. 安装 MetaMask 移动应用
2. 在 MetaMask 内置浏览器中打开应用
3. 或使用 WalletConnect（如支持）
4. 所有功能与桌面版相同

### 注意事项

- 确保网络稳定
- 某些功能可能需要多次确认
- 建议在 WiFi 环境下使用

---

## 🎓 学习资源

### 了解更多

- **FHE 技术**: https://docs.zama.ai/
- **智能合约**: 查看 `contracts/SecretVoting.sol`
- **前端代码**: 查看 `frontend/src/`
- **教程文档**: 查看 `TUTORIAL.md`

### 视频教程（如有）

- YouTube 频道
- B站教学视频
- 开发者直播

---

## 💬 获取帮助

### 社区支持

- **GitHub Issues**: 报告问题
- **Discord**: 加入讨论
- **Telegram**: 快速咨询
- **论坛**: 深入交流

### 联系方式

- GitHub: https://github.com/你的用户名/voting-fun
- Email: your-email@example.com

---

## 🎉 享受使用！

Voting-Fun 让链上投票真正保密和安全。

**开始你的第一次保密投票吧！** 🗳️✨


